#!/bin/sh

[ -f /tmp/recordingpid ] && (kill "$(cat /tmp/recordingpid)" ; rm -f /tmp/recordingpid ; exit 0) && exit 0

outfile="$HOME/Pictures/screen-$(date '+%y%m%d-%H%M-%S').mp4"

ffmpeg -video_size 2560x1440 -framerate 25 \
	-f alsa  \
       -c:a flac \
       -f x11grab -i ":0.0+1920,0" -f pulse -ac 2 -i 1  -async 1 -vsync 1 "$outfile"

echo $! > /tmp/recordingpid
